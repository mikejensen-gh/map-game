(function(t){function e(e){for(var s,o,r=e[0],l=e[1],u=e[2],f=0,m=[];f<r.length;f++)o=r[f],n[o]&&m.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(m.length)m.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},n={app:0},i=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var c=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("c21b"),n=a.n(s);n.a},"1bbd":function(t,e,a){"use strict";var s=a("ac89"),n=a.n(s);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-app",[a("v-content",[a("MapGame")],1)],1)],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{attrs:{id:"gameInterface",dark:""}},[a("v-layout",[a("v-flex",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-2"},[t._v(t._s(t.headingText))]),a("div",{staticClass:"subheading",domProps:{innerHTML:t._s(t.gameInstructions())}})])]),a("v-card-actions",["inactive"===t.gameStatus?a("v-btn",{staticClass:"indigo darken-1 mx-auto",attrs:{flat:""},on:{click:t.startGame}},[t._v("Start game!")]):t._e()],1)],1)],1),a("v-snackbar",{attrs:{bottom:"",timeout:0},model:{value:t.showGuessModal,callback:function(e){t.showGuessModal=e},expression:"showGuessModal"}},[t._v("\n      "+t._s(t.confirmGuessText)+"\n      "),t.guessConfirmed?t._e():a("v-btn",{attrs:{color:"pink",flat:""},on:{click:t.confirmGuess}},[t._v("Confirm")]),t.guessConfirmed&&"active"===t.gameStatus?a("v-btn",{attrs:{color:"pink",flat:""},on:{click:t.nextRound}},[t._v("Continue")]):t._e(),"gameOver"===t.gameStatus?a("v-btn",{attrs:{color:"pink",flat:""},on:{click:t.startGame}},[t._v("Try again!")]):t._e()],1)],1),a("div",{attrs:{id:"gmap-container"}})],1)},r=[],l=(a("7f7f"),{name:"MapGame",data:function(){return{vueGMap:null,gameStatus:"inactive",gameState:{},confirmGuessText:null,guessConfirmed:!1,showGuessModal:!1,guessMarker:null,targetMarker:null,cities:[{name:"Amsterdam",lat:52.3546274,lng:4.828584},{name:"Berlin",lat:52.5067614,lng:13.2846515},{name:"London",lat:51.5285582,lng:-.241679},{name:"Madrid",lat:40.4379332,lng:-3.749576},{name:"Oslo",lat:59.8938364,lng:10.7150777},{name:"Paris",lat:48.8588536,lng:2.3120407},{name:"Rome",lat:41.909986,lng:12.3959165},{name:"Vienna",lat:48.2206636,lng:16.3100208},{name:"Zurich",lat:47.3774497,lng:8.5016958}]}},methods:{createGoogleMaps:function(){return new Promise(function(t,e){var a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyA5vzR_Ej7ccka5ERQeJgGj8Bs7CZ0q_EI"),a.type="text/javascript",a.onload=t,a.onerror=e,document.body.appendChild(a)})},initGoogleMaps:function(){var t=this,e={center:{lat:52.37733,lng:9.7304913},zoom:6,mapTypeId:"terrain",fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1,styles:[{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]}]};this.vueGMap=new google.maps.Map(document.getElementById("gmap-container"),e),this.vueGMap.controls[google.maps.ControlPosition.TOP_CENTER].push(document.getElementById("gameInterface")),this.vueGMap.addListener("click",function(e){t.showConfirmGuessModal(e)})},googleMapsFailedToLoad:function(){this.vueGMap="Error occurred"},startGame:function(){this.gameState={kilometersLeft:1500,citiesCorrectlyGuessed:0},this.gameStatus="active",this.selectNextCity()},showConfirmGuessModal:function(t){this.guessMarker&&this.guessMarker.setMap(null),this.guessConfirmed=!1,this.confirmGuessText="Confirm guess?",this.showGuessModal=!0,this.guessMarker=new google.maps.Marker({position:t.latLng,map:this.vueGMap})},confirmGuess:function(){if("active"===this.gameStatus){var t=this.gameState.cityToGuess,e={lat:this.guessMarker.position.lat(),lng:this.guessMarker.position.lng()},a=this.getGuessDistance(t,e);null!==a&&(a<=50?(this.gameState.citiesCorrectlyGuessed++,this.confirmGuessText="Excellent! Your guess was ".concat(a,"km from ").concat(this.gameState.cityToGuess.name)):(this.gameState.kilometersLeft-=a,this.confirmGuessText="Oops, your guess was ".concat(a,"km from ").concat(this.gameState.cityToGuess.name),this.targetMarker=new google.maps.Marker({position:{lat:t.lat,lng:t.lng},map:this.vueGMap,animation:google.maps.Animation.BOUNCE}),this.vueGMap.panTo(this.targetMarker.getPosition())),this.guessConfirmed=!0,this.gameState.kilometersLeft<=0&&(this.gameStatus="gameOver"))}},getGuessDistance:function(t,e){try{var a=function(t){return t*(Math.PI/180)},s=6371,n=a(t.lat),i=a(e.lat),o=a(e.lat-t.lat),r=a(t.lng-e.lng),l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(n)*Math.cos(i)*Math.sin(r/2)*Math.sin(r/2),u=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return Math.round(s*u)}catch(t){return console.error("Error calculating distance between two points",t),null}},nextRound:function(){this.guessMarker.setMap(null),this.targetMarker&&this.targetMarker.setMap(null),this.showGuessModal=!1,this.selectNextCity()},selectNextCity:function(){var t=this.gameState.cityToGuess;do{this.gameState.cityToGuess=this.cities[Math.floor(Math.random()*this.cities.length)]}while(t&&this.gameState.cityToGuess.name===t.name)},gameInstructions:function(){var t="",e=this.gameState.citiesCorrectlyGuessed;if("inactive"===this.gameStatus&&(t="\n          Can you find Europe's capital cities?<br>\n          If your guess is more than 50km away, you'll lose points.<br>\n          When you score hits 0, the game is over. Good luck!\n        "),"active"===this.gameStatus&&(t='\n          Cities found: <span class="font-weight-bold">'.concat(this.gameState.citiesCorrectlyGuessed,'</span><br>\n          Kilometers left: <span class="font-weight-bold">').concat(this.gameState.kilometersLeft,'</span><br>\n          Find <span class="font-weight-bold">').concat(this.gameState.cityToGuess.name,"!</span>\n        ")),"gameOver"===this.gameStatus)switch(t="You found ".concat(e," ").concat(1===e?"city":"cities",", "),!0){case e<=3:t+="better luck next time.";break;case e<=10:t+="not half bad!";break;default:t+="nice work!"}return t}},mounted:function(){this.createGoogleMaps().then(this.initGoogleMaps,this.googleMapsFailedToLoad)},computed:{headingText:function(){return"gameOver"===this.gameStatus?"Game over man!":"Can you find the city?"}}}),u=l,c=(a("1bbd"),a("2877")),f=Object(c["a"])(u,o,r,!1,null,"78acd5d8",null);f.options.__file="MapGame.vue";var m=f.exports,p={name:"app",components:{MapGame:m}},g=p,d=(a("034f"),Object(c["a"])(g,n,i,!1,null,null,null));d.options.__file="App.vue";var h=d.exports,v=a("ce5b"),y=a.n(v);a("bf40");s["default"].use(y.a,{}),s["default"].config.productionTip=!1,new s["default"]({render:function(t){return t(h)}}).$mount("#app")},ac89:function(t,e,a){},c21b:function(t,e,a){}});
//# sourceMappingURL=app.d01e22c3.js.map