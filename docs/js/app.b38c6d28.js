(function(e){function t(t){for(var s,r,o=t[0],l=t[1],c=t[2],f=0,m=[];f<o.length;f++)r=o[f],n[r]&&m.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},n={app:0},i=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("c21b"),n=a.n(s);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app",[a("v-content",[a("MapGame")],1)],1)],1)},i=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-layout",{attrs:{id:"gameInterface"}},[a("v-flex",[a("v-card",{staticClass:"mx-auto"},[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-2"},[e._v(e._s(e.headingText))]),a("div",{staticClass:"subheading",domProps:{innerHTML:e._s(e.gameInstructions())}})])]),a("v-card-actions",[e.gameActive?e._e():a("v-btn",{staticClass:"mx-auto",attrs:{color:"primary"},on:{click:e.startGame}},[e._v("Start game!")])],1)],1)],1)],1),a("v-snackbar",{attrs:{id:"gameSnackbar",bottom:"",timeout:0},model:{value:e.showGuessModal,callback:function(t){e.showGuessModal=t},expression:"showGuessModal"}},[e._v("\n    "+e._s(e.confirmGuessText)+"\n\n    "),e.guessConfirmed?e._e():a("v-btn",{attrs:{color:"pink",flat:""},on:{click:e.confirmGuess}},[e._v("Confirm")]),e.guessConfirmed&&e.gameActive&&!e.gameOver?a("v-btn",{attrs:{color:"pink",flat:""},on:{click:e.nextRound}},[e._v("Continue")]):e._e(),e.gameOver?a("v-btn",{attrs:{color:"pink",flat:""},on:{click:e.startGame}},[e._v("Start over")]):e._e()],1),a("div",{attrs:{id:"gmap-container"}})],1)},o=[],l=(a("7f7f"),{name:"MapGame",data:function(){return{vueGMap:null,gameActive:!1,gameOver:!1,gameState:{},confirmGuessText:null,guessConfirmed:!1,showGuessModal:!1,guessMarker:null,targetMarker:null,cities:[{name:"Amsterdam",lat:52.3546274,lng:4.828584},{name:"Berlin",lat:52.5067614,lng:13.2846515},{name:"London",lat:51.5285582,lng:-.241679},{name:"Madrid",lat:40.4379332,lng:-3.749576},{name:"Oslo",lat:59.8938364,lng:10.7150777},{name:"Paris",lat:48.8588536,lng:2.3120407},{name:"Rome",lat:41.909986,lng:12.3959165},{name:"Vienna",lat:48.2206636,lng:16.3100208},{name:"Zurich",lat:47.3774497,lng:8.5016958}]}},methods:{createGoogleMaps:function(){return new Promise(function(e,t){var a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyA5vzR_Ej7ccka5ERQeJgGj8Bs7CZ0q_EI"),a.type="text/javascript",a.onload=e,a.onerror=t,document.body.appendChild(a)})},initGoogleMaps:function(){var e=this,t={center:{lat:52.37733,lng:9.7304913},zoom:6,mapTypeId:"terrain",gestureHandling:"greedy",fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1,styles:[{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]}]};this.vueGMap=new google.maps.Map(document.getElementById("gmap-container"),t),this.vueGMap.controls[google.maps.ControlPosition.TOP_CENTER].push(document.getElementById("gameInterface")),this.vueGMap.addListener("click",function(t){e.guessConfirmed||e.showConfirmGuessModal(t)})},googleMapsFailedToLoad:function(){this.vueGMap="Error occurred"},startGame:function(){this.gameState={kilometersLeft:1500,citiesCorrectlyGuessed:0},this.gameActive=!0,this.gameOver=!1,this.nextRound()},showConfirmGuessModal:function(e){this.guessMarker&&this.guessMarker.setMap(null),this.confirmGuessText="Confirm guess?",this.showGuessModal=!0,this.guessMarker=new google.maps.Marker({position:e.latLng,map:this.vueGMap})},confirmGuess:function(){var e=this;if(this.gameActive){var t=this.gameState.cityToGuess,a={lat:this.guessMarker.position.lat(),lng:this.guessMarker.position.lng()},s=this.getGuessDistance(t,a);null!==s&&(s<=50?(this.gameState.citiesCorrectlyGuessed++,this.confirmGuessText="Excellent! Your guess was ".concat(s,"km from ").concat(this.gameState.cityToGuess.name)):(this.gameState.kilometersLeft-=s,this.confirmGuessText="Oops, your guess was ".concat(s,"km from ").concat(this.gameState.cityToGuess.name),this.targetMarker=new google.maps.Marker({position:{lat:t.lat,lng:t.lng},map:this.vueGMap,animation:google.maps.Animation.BOUNCE}),this.vueGMap.panTo(this.targetMarker.getPosition()),setTimeout(function(){e.targetMarker.setAnimation(null)},2e3)),this.guessConfirmed=!0,this.gameState.kilometersLeft<=0&&(this.gameOver=!0))}},getGuessDistance:function(e,t){try{var a=function(e){return e*(Math.PI/180)},s=6371,n=a(e.lat),i=a(t.lat),r=a(t.lat-e.lat),o=a(e.lng-t.lng),l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(n)*Math.cos(i)*Math.sin(o/2)*Math.sin(o/2),c=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return Math.round(s*c)}catch(e){return console.error("Error calculating distance between two points",e),null}},nextRound:function(){this.guessMarker&&this.guessMarker.setMap(null),this.targetMarker&&this.targetMarker.setMap(null),this.guessConfirmed=!1,this.showGuessModal=!1,this.selectNextCity()},selectNextCity:function(){var e=this.gameState.cityToGuess;do{this.gameState.cityToGuess=this.cities[Math.floor(Math.random()*this.cities.length)]}while(e&&this.gameState.cityToGuess.name===e.name)},gameInstructions:function(){var e="",t=this.gameState.citiesCorrectlyGuessed;if(this.gameActive)if(this.gameOver)switch(e="You found ".concat(t," ").concat(1===t?"city":"cities",", "),!0){case t<=3:e+="better luck next time.";break;case t<=10:e+="not half bad!";break;default:e+="nice work!"}else e='\n          Cities found: <span class="font-weight-bold">'.concat(this.gameState.citiesCorrectlyGuessed,'</span><br>\n          Kilometers left: <span class="font-weight-bold">').concat(this.gameState.kilometersLeft,'</span><br>\n          Find <span class="font-weight-bold">').concat(this.gameState.cityToGuess.name,"!</span>\n        ");else e="\n          Can you find Europe's capital cities?<br>\n          If your guess is more than 50km away, you'll lose points.<br>\n          When your score hits 0, the game is over. Good luck!\n        ";return e}},mounted:function(){this.createGoogleMaps().then(this.initGoogleMaps,this.googleMapsFailedToLoad)},computed:{headingText:function(){return this.gameOver?"Game over!":"Can you find the city?"}}}),c=l,u=(a("f18c"),a("2877")),f=Object(u["a"])(c,r,o,!1,null,"6fa22634",null);f.options.__file="MapGame.vue";var m=f.exports,p={name:"app",components:{MapGame:m}},g=p,d=(a("034f"),Object(u["a"])(g,n,i,!1,null,null,null));d.options.__file="App.vue";var h=d.exports,v=a("ce5b"),y=a.n(v);a("bf40");s["default"].use(y.a,{}),s["default"].config.productionTip=!1,new s["default"]({render:function(e){return e(h)}}).$mount("#app")},"7de3":function(e,t,a){},c21b:function(e,t,a){},f18c:function(e,t,a){"use strict";var s=a("7de3"),n=a.n(s);n.a}});
//# sourceMappingURL=app.b38c6d28.js.map