(function(e){function t(t){for(var n,o,r=t[0],l=t[1],u=t[2],m=0,f=[];m<r.length;m++)o=r[m],s[o]&&f.push(s[o][0]),s[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},s={app:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var c=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"046b":function(e,t,a){},"280d":function(e,t,a){"use strict";var n=a("b865"),s=a.n(n);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app",[a("v-content",[a("GameInstructions",{attrs:{gameActive:e.gameActive,gameOver:e.gameOver,gameState:e.gameState},on:{startGame:function(t){e.startGame()}}}),a("GuessModal",{attrs:{confirmGuessText:e.confirmGuessText,showGuessModal:e.showGuessModal,guessConfirmed:e.guessConfirmed,gameActive:e.gameActive,gameOver:e.gameOver},on:{confirmGuess:function(t){e.confirmGuess()},nextRound:function(t){e.nextRound()},startGame:function(t){e.startGame()}}}),a("Map",{on:{clickHandler:function(t){e.mapClickHandler(t)},setMap:function(t){e.setMap(t)}}})],1)],1)],1)},i=[],o=(a("7f7f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{id:"instructions"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-2",domProps:{innerHTML:e._s(e.headingText)}}),a("div",{staticClass:"subheading",domProps:{innerHTML:e._s(e.instructionText)}})])]),a("v-card-actions",[e.gameActive?e._e():a("v-btn",{staticClass:"mx-auto",attrs:{color:"primary"},on:{click:function(t){e.$emit("startGame")}}},[e._v("Start game!")])],1)],1)}),r=[],l={name:"GameInstructions",props:["gameActive","gameOver","gameState","startGame"],computed:{instructionText:function(){var e="",t=this.gameState.citiesCorrectlyGuessed;if(this.gameActive)if(this.gameOver)switch(e="You found ".concat(t," ").concat(1===t?"city":"cities",", "),!0){case t<=3:e+="better luck next time.";break;case t<=10:e+="not half bad!";break;default:e+="nice work!"}else e="\n          Kilometers left: <b>".concat(this.gameState.kilometersLeft,"</b><br>\n          Cities found: <b>").concat(this.gameState.citiesCorrectlyGuessed,"</b><br>\n        ");else e="\n         Try to find the cities - guesses <b>50km or closer</b> are counted as correct. Otherwise you'll lose points; when your score hits 0, the game is over. Good luck!\n        ";return e},headingText:function(){return this.gameOver?"Game over!":this.gameState.cityToGuess.name?"Can you find... <b>".concat(this.gameState.cityToGuess.name,"</b>?"):"Test your knowledge!"}}},u=l,c=(a("856c"),a("2877")),m=Object(c["a"])(u,o,r,!1,null,"40761abe",null);m.options.__file="GameInstructions.vue";var f=m.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-snackbar",{attrs:{id:"guessModal",bottom:"",timeout:0},model:{value:e.showGuessModal,callback:function(t){e.showGuessModal=t},expression:"showGuessModal"}},[e._v("\n  "+e._s(e.confirmGuessText)+"\n\n  "),e.guessConfirmed?e._e():a("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.$emit("confirmGuess")}}},[e._v("Confirm")]),e.guessConfirmed&&e.gameActive&&!e.gameOver?a("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.$emit("nextRound")}}},[e._v("Continue")]):e._e(),e.gameOver?a("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.$emit("startGame")}}},[e._v("Start over")]):e._e()],1)},d=[],p={name:"GuessModal",props:["confirmGuessText","showGuessModal","guessConfirmed","gameActive","gameOver"],methods:{}},h=p,v=(a("79c3"),Object(c["a"])(h,g,d,!1,null,"230ce1c8",null));v.options.__file="GuessModal.vue";var y=v.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"mapContainer"}})},b=[],G={center:{lat:52.37733,lng:9.7304913},zoom:6,mapTypeId:"terrain",gestureHandling:"greedy",fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1,styles:[{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]}]},k={name:"Map",methods:{createGoogleMaps:function(){return new Promise(function(e,t){var a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyA5vzR_Ej7ccka5ERQeJgGj8Bs7CZ0q_EI"),a.type="text/javascript",a.onload=e,a.onerror=t,document.body.appendChild(a)})},initGoogleMaps:function(){var e=this,t=new google.maps.Map(document.getElementById("mapContainer"),G);t.addListener("click",function(t){e.$emit("clickHandler",t)}),this.$emit("setMap",t)},googleMapsFailedToLoad:function(){var e="Error occurred";this.$emit("setMap",e)}},mounted:function(){this.createGoogleMaps().then(this.initGoogleMaps,this.googleMapsFailedToLoad)}},T=k,w=(a("926f"),Object(c["a"])(T,M,b,!1,null,"41d85d07",null));w.options.__file="Map.vue";var C=w.exports,_=[{name:"Amsterdam",lat:52.3546274,lng:4.828584},{name:"Athens",lat:37.990832,lng:23.70332},{name:"Belgrade",lat:44.8151597,lng:20.2825159},{name:"Berlin",lat:52.5067614,lng:13.2846515},{name:"Bratislava",lat:48.1356952,lng:16.9758363},{name:"Brussels",lat:50.8549541,lng:4.3053509},{name:"Bucharest",lat:44.4378043,lng:26.0245983},{name:"Budapest",lat:47.4811282,lng:18.9902222},{name:"Chisinau",lat:46.9998477,lng:28.7881374},{name:"Copenhagen",lat:55.6712474,lng:12.523785},{name:"Dublin",lat:53.3242996,lng:-6.3157431},{name:"Helsinki",lat:60.1098679,lng:24.738515},{name:"Istanbul",lat:41.0052367,lng:28.872098},{name:"Lisabon",lat:38.7436214,lng:-9.1952225},{name:"Ljubljana",lat:46.066096,lng:14.4620599},{name:"London",lat:51.5285582,lng:-.241679},{name:"Kyiv",lat:50.4019514,lng:30.39261},{name:"Madrid",lat:40.4379332,lng:-3.749576},{name:"Minsk",lat:53.8838069,lng:27.5796489},{name:"Moscow",lat:55.5807482,lng:36.8251602},{name:"Oslo",lat:59.8938364,lng:10.7150777},{name:"Paris",lat:48.8588536,lng:2.3120407},{name:"Podgorica",lat:42.4319954,lng:19.2208596},{name:"Prague",lat:50.0595854,lng:14.3255434},{name:"Prishtina",lat:42.6663748,lng:21.123708},{name:"Riga",lat:56.9713962,lng:23.9890827},{name:"Rome",lat:41.909986,lng:12.3959165},{name:"Sarajevo",lat:43.8937019,lng:18.3129523},{name:"Skopje",lat:41.9990849,lng:21.389871},{name:"Sofia",lat:42.6388078,lng:23.1838654},{name:"Stockholm",lat:59.3260668,lng:17.841973},{name:"Tallinn",lat:59.4716181,lng:24.598162},{name:"Tirana",lat:41.3309769,lng:19.7828039},{name:"Vienna",lat:48.2206636,lng:16.3100208},{name:"Vilnius",lat:54.7000902,lng:25.1128521},{name:"Warsaw",lat:52.232855,lng:20.9211138},{name:"Zagreb",lat:45.8401746,lng:15.8942924},{name:"Zurich",lat:47.3774497,lng:8.5016958}],x={name:"app",components:{GameInstructions:f,GuessModal:y,Map:C},data:function(){return{vueGMap:null,gameActive:!1,gameOver:!1,gameState:{kilometersLeft:1500,citiesCorrectlyGuessed:0,cityToGuess:{name:"",lat:0,lng:0}},confirmGuessText:null,guessConfirmed:!1,showGuessModal:!1,guessMarker:null,targetMarker:null}},methods:{startGame:function(){this.gameState={kilometersLeft:1500,citiesCorrectlyGuessed:0,cityToGuess:{name:"",lat:0,lng:0}},this.gameActive=!0,this.gameOver=!1,this.nextRound()},showConfirmGuessModal:function(e){this.guessMarker&&this.guessMarker.setMap(null),this.confirmGuessText="Confirm guess?",this.showGuessModal=!0,this.guessMarker=new google.maps.Marker({position:e.latLng,map:this.vueGMap})},confirmGuess:function(){var e=this;if(this.gameActive){var t=this.gameState.cityToGuess,a={lat:this.guessMarker.position.lat(),lng:this.guessMarker.position.lng()},n=this.getGuessDistance(t,a);null!==n&&(n<=50?(this.gameState.citiesCorrectlyGuessed++,this.confirmGuessText="Excellent! Your guess was ".concat(n,"km from ").concat(this.gameState.cityToGuess.name)):(this.gameState.kilometersLeft-=n,this.confirmGuessText="Oops, your guess was ".concat(n,"km from ").concat(this.gameState.cityToGuess.name),this.targetMarker=new google.maps.Marker({position:{lat:t.lat,lng:t.lng},map:this.vueGMap,animation:google.maps.Animation.BOUNCE}),this.vueGMap.panTo(this.targetMarker.getPosition()),setTimeout(function(){e.targetMarker.setAnimation(null)},1e3)),this.guessConfirmed=!0,this.gameState.kilometersLeft<=0&&(this.gameOver=!0))}},toRadians:function(e){return e*(Math.PI/180)},getGuessDistance:function(e,t){try{var a=6371,n=this.toRadians(e.lat),s=this.toRadians(t.lat),i=this.toRadians(t.lat-e.lat),o=this.toRadians(e.lng-t.lng),r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n)*Math.cos(s)*Math.sin(o/2)*Math.sin(o/2),l=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return Math.round(a*l)}catch(e){return console.error("Error calculating distance between two points",e),null}},nextRound:function(){this.guessMarker&&this.guessMarker.setMap(null),this.targetMarker&&this.targetMarker.setMap(null),this.guessConfirmed=!1,this.showGuessModal=!1,this.selectNextCity()},selectNextCity:function(){var e=this.gameState.cityToGuess;do{this.gameState.cityToGuess=_[Math.floor(Math.random()*_.length)]}while(e&&this.gameState.cityToGuess.name===e.name)},mapClickHandler:function(e){this.guessConfirmed||this.showConfirmGuessModal(e)},setMap:function(e){this.vueGMap=e}}},S=x,O=(a("280d"),Object(c["a"])(S,s,i,!1,null,"e43aaa6c",null));O.options.__file="App.vue";var j=O.exports,A=a("ce5b"),P=a.n(A);a("bf40");n["default"].use(P.a,{}),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(j)}}).$mount("#app")},"79c3":function(e,t,a){"use strict";var n=a("8b3f"),s=a.n(n);s.a},"856c":function(e,t,a){"use strict";var n=a("a5b8"),s=a.n(n);s.a},"8b3f":function(e,t,a){},"926f":function(e,t,a){"use strict";var n=a("046b"),s=a.n(n);s.a},a5b8:function(e,t,a){},b865:function(e,t,a){}});
//# sourceMappingURL=app.e31f40a4.js.map